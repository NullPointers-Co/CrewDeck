import{ak as M,r as n,l as b,aj as R,al as k,o as D,n as N,q as w,i as A,Q as i,y as T,z as y,A as C}from"./index-DFhzUcVB.js";import{V as x}from"./VBtn-DVZAdq7u.js";import{V as O}from"./VContainer-BqM26Tvo.js";import"./VGrid-BzFVDftg.js";const V=M("app",()=>{const r=n(Number(localStorage.getItem("lastRefreshTime"))||0),a=n(Number(localStorage.getItem("refreshCount"))||0);return{lastRefreshTime:r,refreshCount:a,trackRefresh:(o,g)=>{const f=Date.now();if(f-r.value<o){if(a.value++,a.value>g)return!1}else a.value=1;return r.value=f,localStorage.setItem("lastRefreshTime",r.value.toString()),localStorage.setItem("refreshCount",a.value.toString()),!0}}}),$=b({__name:"NoMeetingComponent",setup(r){const a="https://apigetdisablemeeting-qrhwd3w2aa-as.a.run.app",m="https://apiputdisablemeeting-qrhwd3w2aa-as.a.run.app";async function o(e,t="GET",l){const d={method:t,headers:{"Content-Type":"application/json"},body:l?JSON.stringify(l):void 0},u=await fetch(e,d);if(!u.ok)throw new Error(`HTTP error! status: ${u.status}`);return await u.json()}async function g(e){return await o(e)}async function f(e,t){await o(e,"PUT",t)}const s=n(null),v=n(null),c=n(!1),p=n(!0),_=n("primary"),S=n("..."),h=()=>{const e=setInterval(()=>{const t=new Date,l=23-t.getHours(),d=59-t.getMinutes(),u=59-t.getSeconds();S.value=`${l.toString().padStart(2,"0")} : ${d.toString().padStart(2,"0")} : ${u.toString().padStart(2,"0")}`,l===0&&d===0&&u===0&&clearInterval(e)},1e3)};async function E(){p.value=!0;try{await f(m,{disable_meeting:!0})}catch(e){v.value=e.message,s.value=null}finally{c.value=!0,_.value="error",p.value=!1,h()}}async function I(){try{p.value=!0,s.value=await g(a),v.value=null,c.value=!!s.value.disable_meeting,_.value=s.value.disable_meeting?"error":"primary",s.value&&h()}catch(e){v.value=e.message,s.value=null}finally{p.value=!1}}return R(()=>{V().trackRefresh(5e3,3)||(alert("刷新频率过高，请稍后再试！"),k().replace("/")),I()}),(e,t)=>(D(),N(O,{class:"fill-height d-flex justify-center align-center"},{default:w(()=>[A(x,{color:i(_),"prepend-icon":"mdi-calendar-remove",size:"x-large",disabled:i(c),rounded:"",stacked:"",loading:i(p),onClick:E},{default:w(()=>[T("div",null,[y(C(i(c)?"The meeting cooled down":"Cancel Meeting Today")+" ",1),t[0]||(t[0]=T("br",null,null,-1)),y(" "+C(i(c)?`${i(S)}`:""),1)])]),_:1},8,["color","disabled","loading"])]),_:1}))}}),U=b({__name:"no-meeting",setup(r){return(a,m)=>{const o=$;return D(),N(o)}}});export{U as default};
